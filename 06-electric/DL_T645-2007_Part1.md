# 帧结构


| 起始字符68H | 地址域 | 起始字符68H | 控制码C | 数据域长度L | 数据域 | 校验和CS | 结束字符16H |
| :---------: | :----: | :---------: | :-----: | :---------: | :----: | :------: | :---------: |
|    1Byte    | 6Byte  |    1Byte    |  1Byte  |    1Byte    | N Byte |  1Byte   |    1Byte    |




## 地址域

- 地址域为6个字节的BCD码构成，当使用的地址码长度不足6字节，高位用0补足；
- 当通信地址为99999999999H时，为广播地址，只针对特殊命令有效，如广播校时和广播冻结等，广播命令时，不要求从站应答；
- 地址域支持缩位寻址，，即从若干低位起，剩余高位补AAH作为通配符进行读表操作，从站应答帧的地址域返回实际通信地址；
- 地址域传输时低字节在前，高字节在后；


## 控制码C

|          D7          |         D6          |       D5        | D4-D0               |
| :------------------: | :-----------------: | :-------------: | :------------------ |
|       传输方向       |    从站应答标志     |   后续帧标志    | 功能码              |
| 0：主站发出的命令帧  | 0：从站正确应答标志 | 0：无后续帧标志 | 00000：保留         |
| 1： 从站发出的命令帧 | 1：从站异常应答标志 | 1：有后续帧标志 | 01000：广播校时     |
|                      |                     |                 | 10001：读数据       |
|                      |                     |                 | 10010：读后续数据   |
|                      |                     |                 | 10011：读通信地址   |
|                      |                     |                 | 10100：写数据       |
|                      |                     |                 | 10101：写通信地址   |
|                      |                     |                 | 10110：冻结命令     |
|                      |                     |                 | 10111：更改通信速率 |
|                      |                     |                 | 11000：修改密码     |
|                      |                     |                 | 11001：最大需量清零 |
|                      |                     |                 | 11010：电量清零     |
|                      |                     |                 | 11010：事件清零     |


## 数据长度L

读数据时 L小于等于200，写数据时 L小于等于50，L=0表示无数据域。


## 数据域

数据域包括数据标识、密码、操作者代码、数据、帧序号等，其结构岁控制码的功能而改变。传输时发送方按字节进行加33H处理，接收方按字节进行减33H处理。


## 校验码

从第一帧其实符到校验码之前的所有字节的的二进制算术和，不计超过256的溢出值。


# 传输

## 前导字节

在主站发送帧信息之前，先发送4个字节 EFH，以唤醒接收方。

## 传输次序

所有数据项均先传低位字节，后传高位字节。例：电能值为 123456.78 kWh


<div align="center"><img src="https://github.com/laneston/note/blob/main/00-img/Post-DL_T645-2007/传输次序图.jpg"></div>


字节校验为偶校验，帧校验为纵向信息校验和，接收方无论检测到偶检验出错或者纵向信息校验和出错，均放弃信息帧，不予响应。

## 传输响应

每次通信都是由主站向按信息帧地址域选择的从站发出请求命令帧开始，被请求的从站接收到命令后作出响应。收到命令帧后的响应延时：大于20ms小于500ms；字节之间停顿时间应小于500ms.


# 数据标识

## 数据标识结构

数据标识码用4个字节区分不同数据项，4字节分别用 DI3、DI2、DI1、DI0代表，梅子姐采用16进制编码。数据类型分为7类：电能量、最大需量及发生时间、变量、事件记录、参变量、冻结量、负荷记录。



## 数据传输形式

数据标识码标识单个数据项或数据项集合。当请求方位由若干数据项组成的数据集合时，可使用数据块标识码。实际应用以**数据标识编码表**定义内容为准。


除特殊说明的数据项以 ASCII 码表示外，其他数据均采用若干压缩BCD吗表示。

数据标识DI3、DI2、DI1、DI0中任一字节取值为 FFH 时（其中DI3不存在 FFH 情况），代表该字节定义的所有数据项与其他3个字节组成的数据块。例子“


- 标识码 DI3、DI2、DI1、DI0=00010000H（数据项）表示当前正向有功总电能；
- 标识码 DI3、DI2、DI1、DI0=000100FFH（数据块）表示正向有功总电能数据块，包含当前、上1结算日~上12结算日正向有功总电能数据；
- 标识码 DI3、DI2、DI1、DI0=0001FF00H（数据块）表示当前正向有功电能量数据块，包含总、费率1、费率2...的当前正向有功电能数据；


# 应用层

## 读数据

### 主站请求帧

1. 功能：请求读电能表数据
2. 控制码：11H
3. 数据长度：L=04H+(数据长度)

m=0时：

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  11H   |    04H     | DI0 DI1 DI2 DI3 |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     | 校验码 | 结束字符 |


m=1时，读给定块数的符合记录：


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  11H   |    05H     | DI0 DI1 DI2 DI3 |      N       |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :----------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     | 负荷记录块数 | 校验码 | 结束字符 |


m=6时，读给定时间、块数的负荷记录：


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  11H   |    0AH     | DI0 DI1 DI2 DI3 |      N       |  mm   |  hh   |  DD   |  MM   |  YY   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :----------: | :---: | :---: | :---: | :---: | :---: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     | 负荷记录块数 |  分   |  时   |  日   |  月   |  年   | 校验码 | 结束字符 |



### 从站正常应答

1. 控制码：C=91H 无后续数据帧； C=B1H 有后续数据帧；
2. 数据域长度：L=04H+m(数据长度)；


无后续数据帧：
|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  91H   |     L      | DI0 DI1 DI2 DI3 | N1...Nm |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :-----: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     |  数据   | 校验码 | 结束字符 |


有后续数据帧：
|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  B1H   |     L      | DI0 DI1 DI2 DI3 | N1...Nm |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :-----: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     |  数据   | 校验码 | 结束字符 |


### 从站异常应答帧

1. 控制码： C=D1H;
2. 数据域长度： L=01H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  D1H   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |



## 读后续数据

### 主站请求帧

1. 功能：请求读后续数据；
2. 控制码： C=12H;
3. 数据域长度： L=05H

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  12H   |    05H     | DI0 DI1 DI2 DI3 |  SEQ   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :----: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     | 帧序号 | 校验码 | 结束字符 |

### 从站正常应答帧


1. 控制码： C=92H 表示无后续数据帧， C=B2H 表示有后续数据帧，；
2. 数据域长度：L=05H+m(数据长度);



无后续数据帧格式

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  92H   |     L      | DI0 DI1 DI2 DI3 | N1...Nm |  SEQ   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :-----: | :----: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     |  数据   | 帧序号 | 校验码 | 结束字符 |


无后续数据帧格式

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  B2H   |     L      | DI0 DI1 DI2 DI3 | N1...Nm |  SEQ   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :-----: | :----: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     |  数据   | 帧序号 | 校验码 | 结束字符 |


### 从站异常应答帧

1. 控制码 C=D2H;
2. 数据域长度： L=01H;
   


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  D2H   |    01H     |    ERR     |  CS   |  16H   |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :---: | :----: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 数据  | 校验码 | 结束字符 |


## 写数据

## 主站请求帧

1. 功能：主站向从站请求设置数据（或编程）
2. 控制码： C=14H;
3. 数据域长度：L=04H+04H(密码)+04H(操作者代码)+m(数据长度)


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  14H   |     L      | DI0 DI1 DI2 DI3 | PA P0 P1 P2 | C0 C1 C2 C3 | N1...Nm |  SEQ   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :---------: | :---------: | :-----: | :----: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     |    密码     | 操作者代码  |  数据   | 帧序号 | 校验码 | 结束字符 |


P0P1P2为密码，PA表示该密码权限；C0C1C2C3是操作者代码，为要求记录操作人员信息的项目提供数据；本命令必须与编程键配合使用。

## 从站应答帧

### 从站正常应答帧


1. 控制码： C=94H;
2. 数据域长度： L=00H;



|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  94H   |    00H     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 校验码 | 结束字符 |


### 从站异常应答帧


1. 控制码： C=D4H;
2. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  D4H   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |


## 读通信地址

### 主站请求帧

1. 功能：请求读电能表通信地址，仅支持点对点通信；
2. 地址域：AAH...AAH
3. 控制码： C=13H;
4. 数据域长度： L=00H;

|  68H   | AAH AAH AAH AAH AAH AAH |    68H     |  13H   |    00H     |   CS   |   16H    |
| :----: | :---------------------: | :--------: | :----: | :--------: | :----: | :------: |
| 起始帧 |         地址域          | 后续帧标志 | 控制码 | 数据域长度 | 校验码 | 结束字符 |

### 从站正常应答帧

1. 控制码： C=93H;
2. 数据域长度： L=06H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  93H   |    06H     | A0 A1 A2 A3 A4 A5 |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |     通信地址      | 校验码 | 结束字符 |


## 写通信地址

### 主站请求帧

1. 功能：设置某从站的通信地址，仅支持点对点通信；
2. 地址域：AAH...AAH
3. 控制码： C=15H;
4. 数据域长度： L=06H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  15H   |    06H     | A0 A1 A2 A3 A4 A5 |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |     通信地址      | 校验码 | 结束字符 |


### 从站正常应答帧

1. 控制码： C=95H;
2. 地址域：新设置的通信地址
3. 数据域长度： L=00H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  95H   |    00H     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 校验码 | 结束字符 |

从站异常时不应答。


## 广播校时


1. 功能：强制从站与主站时间同步；
2. 控制码： C=08H;
3. 数据域长度： L=06H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  08H   |    06H     |  ss   |  mm   |  hh   |  DD   |  MM   |  YY   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---: | :---: | :---: | :---: | :---: | :---: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |  秒   |  分   |  时   |  日   |  月   |  年   | 校验码 | 结束字符 |


广播校时不要求应答；仅当从站的日期和时钟与主站的时差在正负5min以内时执行广播校时命令，即将从站的日期时钟调整到与命令下达的日期时钟一致；不推荐在0点校时，以免影响在0时进行的某些例行操作；每天只允许校时一次。



## 冻结命令

### 主站请求帧

1. 功能：冻结电能表数据，冻结内容见冻结数据标识编码表；
2. 控制码： C=16H;
3. 数据域长度： L=04H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  16H   |    04H     |  mm   |  hh   |  DD   |  MM   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---: | :---: | :---: | :---: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |  分   |  时   |  日   |  月   | 校验码 | 结束字符 |


**广播冻结命令帧格式**：
|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  16H   |    04H     |  mm   |  hh   |  DD   |  MM   |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---: | :---: | :---: | :---: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |  分   |  时   |  日   |  月   | 校验码 | 结束字符 |

广播冻结不要求应答；数据域99DDhhmm表示以月为周期定时冻结，数据域9999hhmm表示以日为周期定时冻结，数据域999999mm表示以小时为周期定时冻结，数据域99999999表示瞬时冻结。

### 从站正常应答帧

1. 控制码： C=96H;
2. 数据域长度： L=00H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  96H   |    00H     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 校验码 | 结束字符 |


### 从站异常应答帧

1. 控制码： C=D6H;
2. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  D6H   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |


## 更改通信速率

### 主站请求帧

1. 功能： 更改电能表当前通信速率为其他标准速率；
2. 控制码： C=17H;
3. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  17H   |    01H     |       Z        |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 通信速率特征字 | 校验码 | 结束字符 |



### 从站正常应答帧

1. 控制码： C=97H;
2. 数据域长度： L=01H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  97H   |    01H     |       Z        |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 通信速率特征字 | 校验码 | 结束字符 |


### 从站异常应答帧


1. 控制码： C=D7H;
2. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  D7H   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |


## 修改密码


### 主站请求帧

1. 功能： 修改从站密码设置；
2. 控制码： C=18H;
3. 数据域长度： L=0CH;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  18H   |    0CH     | DI0 DI1 DI2 DI3 | PA P0 P1 P2 | PAn P0n P1n P2n |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :---------: | :-------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     |  原始密码   |     新密码      | 校验码 | 结束字符 |


P0 P1 P2为源密码或更高权限的密码，PA表示该密码权限；P0n P1n P2n表示新密码或需要设置的密码，PAn 为新密码的权限。PA 的取值范围为00-09,00为最高权限，数值越大权限越低。权限级别分别为：02级电表清零、时间清零；04级写数据、最大需量清零。本命令必须与编程键配合使用。

### 从站正常应答帧

1. 控制码： C=98H;
2. 数据域长度： L=01H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  98H   |    04H     | PAn P0n P1n P2n |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |     新密码      | 校验码 | 结束字符 |


### 从站异常应答帧


1. 控制码： C=D8H;
2. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  D7H   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |


## 最大需量清零

### 主站请求帧

1. 功能： 当前最大需量及发生时间数据清零；
2. 控制码： C=19H;
3. 数据域长度： L=08H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  19H   |    08H     | DI0 DI1 DI2 DI3 | PA P0 P1 P2 | C0 C1 C2 C3 |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :-------------: | :---------: | :---------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    数据标识     |    密码     | 操作者代码  | 校验码 | 结束字符 |

本命令必须与编程键配合使用。

### 从站正常应答帧

1. 控制码： C=99H;
2. 数据域长度： L=00H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  99H   |    00H     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 校验码 | 结束字符 |


### 从站异常应答帧


1. 控制码： C=D9H;
2. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  D9H   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |


## 电表清零

### 主站请求帧

1. 功能： 清空电能表内电能量、最大需量及发生时间、冻结量、事件记录、负荷纪录等数据；
2. 控制码： C=1AH;
3. 数据域长度： L=08H;



|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  1AH   |    08H     | PA P0 P1 P2 | C0 C1 C2 C3 |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---------: | :---------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    密码     |             | 校验码 | 结束字符 |


本命令必须与编程键配合使用。命令执行事电能表应保证电表清零事件记录不被清除，并自动保存该事件的相应数据。


### 从站正常应答帧

1. 控制码： C=9AH;
2. 数据域长度： L=00H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  9AH   |    00H     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 校验码 | 结束字符 |


### 从站异常应答帧


1. 控制码： C=DAH;
2. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  DAH   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |


## 事件清零

### 主站请求帧

1. 功能： 清空电能表内存储的全部或某类事件的记录数据；
2. 控制码： C=1BH;
3. 数据域长度： L=0CH;

事件总清零

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  1BH   |    0CH     | PA P0 P1 P2 | C0 C1 C2 C3 | FFH FFH FFH FFH |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---------: | :---------: | :-------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    密码     | 操作者代码  |                 | 校验码 | 结束字符 |


分项事件清零

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  1BH   |    0CH     | PA P0 P1 P2 | C0 C1 C2 C3 | FFH DI1 DI2 DI3 |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :---------: | :---------: | :-------------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 |    密码     | 操作者代码  |                 | 校验码 | 结束字符 |

本命令必须与编程键配合使用，执行此命令时不允许清空事件清零记录和电表清零记录数据。

### 从站正常应答帧

1. 控制码： C=9BH;
2. 数据域长度： L=00H;

|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  9BH   |    00H     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 校验码 | 结束字符 |


### 从站异常应答帧


1. 控制码： C=DBH;
2. 数据域长度： L=01H;


|  68H   | A0 A1 A2 A3 A4 A5 |    68H     |  DBH   |    01H     |    ERR     |   CS   |   16H    |
| :----: | :---------------: | :--------: | :----: | :--------: | :--------: | :----: | :------: |
| 起始帧 |      地址域       | 后续帧标志 | 控制码 | 数据域长度 | 错误信息字 | 校验码 | 结束字符 |


